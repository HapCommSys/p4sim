Running simulation...

# Switch 1 port 1
0 1042***Netdevice: Receive: after remove the custom header 234
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:01, destination=ff:ff:ff:ff:ff:ff) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 1301) Payload (size=1000) 
0 1042***Netdevice: Receive: origin pacekt 321 

# Switch 1 core
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:01, destination=ff:ff:ff:ff:ff:ff) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 1301) Payload (size=1000) 
* Switch Port *** Receive from Device: 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:01, destination=00:00:00:00:00:02) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 1301) Payload (size=1000)1042
* after p4 processing 
Payload (size=1042)
* Switch Port (out)*** Send from Device: 
Payload (size=1042) packet length: 1028

# Switch 2 port 1
01042***Netdevice: Receive: after remove the custom header 234
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:09, destination=00:00:00:00:00:02) Payload (size=1042) 
01042***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:09, destination=00:00:00:00:00:02) Payload (size=1042) 

# Switch 2 core
* Switch Port *** Receive from Device: 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:09, destination=00:00:00:00:00:0a) Payload (size=1042)1042
* after p4 processing 
Payload (size=1042)
* Switch Port (out)*** Send from Device: 
Payload (size=1042)packet length: 1028

# Switch 3 port 1
01042***Netdevice: Receive: after remove the custom header 234
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:0c, destination=00:00:00:00:00:0a) Payload (size=1042) 
01042***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:0c, destination=00:00:00:00:00:0a) Payload (size=1042) 

# Switch 3 core 
* Switch Port *** Receive from Device: 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:0c, destination=00:00:00:00:00:0b) Payload (size=1042)1042
* after p4 processing 
Payload (size=1042)
* Switch Port (out)*** Send from Device: 
Payload (size=1042)packet length: 1028


1 1028***Netdevice: Receive: after remove the custom header 234
ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 61 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1000 49153 > 1301) Payload (size=1042) 
1 1028***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:04, destination=00:00:00:00:00:0b) Payload (size=1042) 
Simulate Running time: 3464ms
Total Running time: 3506ms
Run successfully!


# p2p test log
***Netdevice: Receive: after remove the custom header 234
ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 9) Payload (size=1000) 
packet size 1028
***Netdevice: Receive: origin pacekt 321 
ns3::PppHeader (Point-to-Point Protocol: IP (0x0021)) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 9) Payload (size=1000) 
packet size 1030


Node IP and MAC addresses:
Node 0: IP = 10.1.1.1, MAC = 00:00:00:00:00:01
Node 0: IP = 0x0a010101, MAC = 0x000000000001
Node 1: IP = 10.1.1.2, MAC = 00:00:00:00:00:03
Node 1: IP = 0x0a010102, MAC = 0x000000000003
Node 2: IP = 10.1.1.3, MAC = 00:00:00:00:00:05
Node 2: IP = 0x0a010103, MAC = 0x000000000005
*** P4 switch configuration: /home/p4/workdir/ns-3-dev-git/contrib/p4sim/examples/p4src/basic_tunnel/basic_tunnel.json, 
 /home/p4/workdir/ns-3-dev-git/contrib/p4sim/examples/p4src/basic_tunnel/flowtable_0.txt
*** P4 switch configuration: /home/p4/workdir/ns-3-dev-git/contrib/p4sim/examples/p4src/basic_tunnel/basic_tunnel.json, 
 /home/p4/workdir/ns-3-dev-git/contrib/p4sim/examples/p4src/basic_tunnel/flowtable_1.txt
*** P4 switch configuration: /home/p4/workdir/ns-3-dev-git/contrib/p4sim/examples/p4src/basic_tunnel/basic_tunnel.json, 
 /home/p4/workdir/ns-3-dev-git/contrib/p4sim/examples/p4src/basic_tunnel/flowtable_2.txt
Running simulation...
01042***Netdevice: Receive: after remove the custom header 234
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:01, destination=ff:ff:ff:ff:ff:ff) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 1301) Payload (size=1000) 
01042***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:01, destination=ff:ff:ff:ff:ff:ff) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 1301) Payload (size=1000) 

* Switch Port *** Receive from Device: 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:01, destination=00:00:00:00:00:02) ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 64 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1008 49153 > 1301) Payload (size=1000) 1042

* after p4 processing 1042 packet length
Payload (size=1042)

* Switch Port (out)*** Send from Device: 
Payload (size=1042) packet length: 1028

0 1042 ***Netdevice: Receive: after remove the custom header 234
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:09, destination=00:00:00:00:00:02) Payload (size=1042) 

01042***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:09, destination=00:00:00:00:00:02) Payload (size=1042) 
* Switch Port *** Receive from Device: 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:09, destination=00:00:00:00:00:0a) Payload (size=1042)1042
* after p4 processing 1042packet length
Payload (size=1042)
* Switch Port (out)*** Send from Device: 
Payload (size=1042)packet length: 1028
01042***Netdevice: Receive: after remove the custom header 234
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:0c, destination=00:00:00:00:00:0a) Payload (size=1042) 
01042***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:0c, destination=00:00:00:00:00:0a) Payload (size=1042) 
* Switch Port *** Receive from Device: 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:0c, destination=00:00:00:00:00:0b) Payload (size=1042) 1042
* after p4 processing 1042packet length
Payload (size=1042)
* Switch Port (out)*** Send from Device: 
Payload (size=1042) packet length: 1028

1 1028***Netdevice: Receive: after remove the custom header 234
ns3::Ipv4Header (tos 0x0 DSCP Default ECN Not-ECT ttl 61 id 0 protocol 17 offset (bytes) 0 flags [none] length: 1028 10.1.1.1 > 10.1.1.2) ns3::UdpHeader (length: 1000 49153 > 1301) Payload (size=1042) 
1 1042***Netdevice: Receive: origin pacekt 321 
ns3::EthernetHeader ( length/type=0x800, source=00:00:00:00:00:04, destination=00:00:00:00:00:0b) Payload (size=1042) 



* Switch Port (out)*** Send from Device: 

Thread 1 "ns3.39-p4-basic" hit Breakpoint 1, ns3::P4SwitchNetDevice::SendNs3Packet (this=0x5555556e1560, packetOut=..., outPort=2, protocol=2048, destination=...)
    at /home/p4/workdir/ns-3-dev-git/contrib/p4sim/model/p4-switch-net-device.cc:562
562             packetOut->Print(std::cout);
(gdb) b packet.cc:458
Breakpoint 2 at 0x7ffff681c5a3: file /home/p4/workdir/ns-3-dev-git/src/network/model/packet.cc, line 458.
(gdb) c
Continuing.

Thread 1 "ns3.39-p4-basic" hit Breakpoint 2, ns3::Packet::Print (this=0x5555558b87f0, os=...) at /home/p4/workdir/ns-3-dev-git/src/network/model/packet.cc:458
458         PacketMetadata::ItemIterator i = m_metadata.BeginItem(m_buffer);
(gdb) p m_buffer
$1 = {m_data = 0x5555558d9720, m_maxZeroAreaStart = 1042, m_zeroAreaStart = 1042, m_zeroAreaEnd = 1042, m_start = 14, m_end = 1042}
(gdb) n
459         while (i.HasNext())
(gdb) n
461             PacketMetadata::Item item = i.Next();
(gdb) n
462             if (item.isFragment)
(gdb) p item
$2 = {type = ns3::PacketMetadata::Item::PAYLOAD, isFragment = false, tid = {m_tid = 0}, currentSize = 1042, currentTrimmedFromStart = 0, currentTrimmedFromEnd = 0, current = {
    m_zeroStart = 0, m_zeroEnd = 0, m_dataStart = 0, m_dataEnd = 0, m_current = 0, m_data = 0x0}} # 这里仅有PAYLOAD，然后RemoveHeader也不能进行该操作。
(gdb) n
479                 switch (item.type)
(gdb) n
482                     os << "Payload (size=" << item.currentSize << ")";
(gdb) n
483                     break;
(gdb) n
518             if (i.HasNext())
(gdb) n
522         }
(gdb) n
459         while (i.HasNext())
(gdb) n
587     }
(gdb) n
ns3::P4SwitchNetDevice::SendNs3Packet (this=0x5555556e1560, packetOut=..., outPort=2, protocol=2048, destination=...)
    at /home/p4/workdir/ns-3-dev-git/contrib/p4sim/model/p4-switch-net-device.cc:563